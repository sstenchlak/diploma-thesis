%%% The main file. It contains definitions of basic parameters and includes all other parts.

%% Settings for single-side (simplex) printing
% Margins: left 40mm, right 25mm, top and bottom 25mm
% (but beware, LaTeX adds 1in implicitly)
\documentclass[12pt,a4paper,dvipsnames]{report}
\setlength\textwidth{145mm}
\setlength\textheight{247mm}
\setlength\oddsidemargin{15mm}
\setlength\evensidemargin{15mm}
\setlength\topmargin{0mm}
\setlength\headsep{0mm}
\setlength\headheight{0mm}
% \openright makes the following text appear on a right-hand page
\let\openright=\clearpage

% Settings for two-sided (duplex) printing
%\documentclass[12pt,a4paper,twoside,openright,dvipsnames]{report}
%\setlength\textwidth{145mm}
%\setlength\textheight{247mm}
%\setlength\oddsidemargin{14.2mm}
%\setlength\evensidemargin{0mm}
%\setlength\topmargin{0mm}
%\setlength\headsep{0mm}
%\setlength\headheight{0mm}
%\let\openright=\cleardoublepage

%% Generate PDF/A-2u
\usepackage[a-2u]{pdfx}

%% Character encoding: usually latin2, cp1250 or utf8:
\usepackage[utf8]{inputenc}

%% Prefer Latin Modern fonts
\usepackage{lmodern}

%% CUSTOMIZATION: Support diacritics
\usepackage[T1]{fontenc}
\usepackage{textcomp}

%% Further useful packages (included in most LaTeX distributions)
\usepackage{amsmath}        % extensions for typesetting of math
\usepackage{amsfonts}       % math fonts
\usepackage{amsthm}         % theorems, definitions, etc.
\usepackage{bbding}         % various symbols (squares, asterisks, scissors, ...)
\usepackage{bm}             % boldface symbols (\bm)
\usepackage{graphicx}       % embedding of pictures
\usepackage{fancyvrb}       % improved verbatim environment
\usepackage[sort&compress]{natbib}         % citation style AUTHOR (YEAR), or AUTHOR [NUMBER]
\usepackage[nottoc]{tocbibind} % makes sure that bibliography and the lists
			    % of figures/tables are included in the table
			    % of contents
\usepackage{dcolumn}        % improved alignment of table columns
\usepackage{booktabs}       % improved horizontal lines in tables
\usepackage{paralist}       % improved enumerate and itemize
\usepackage{xcolor}         % typesetting in color

\ifdefined\version\ifx\version\empty\else
	\usepackage{background}
	\SetBgContents{\version}
	\SetBgScale{1}
	\SetBgAngle{0}
	\SetBgOpacity{1}
	\SetBgColor{gray}
	\SetBgPosition{current page.south west}
	\SetBgAnchor{right}
	\SetBgHshift{.5cm}
	\SetBgVshift{.5cm}
\fi\fi

\usepackage{bold-extra}
\usepackage{wrapfig}
\usepackage{qrcode}
\usepackage{xurl}
\usepackage{float}
\usepackage{import}
\usepackage{listings}
\lstset{
  basicstyle=\ttfamily,
  columns=fixed,
  fontadjust=true,
  basewidth=0.5em,
  showstringspaces=false,
}
\definecolor{gray}{rgb}{0.4,0.4,0.4}
\definecolor{darkblue}{rgb}{0.0,0.0,0.6}
\definecolor{cyan}{rgb}{0.0,0.6,0.6}
\lstdefinelanguage{XML}
{
  morestring=[b]",
  morestring=[s]{>}{<},
  morecomment=[s]{<?}{?>},
  stringstyle=\color{black},
  identifierstyle=\color{darkblue},
  keywordstyle=\color{cyan},
  morekeywords={xmlns,version,type}% list your attributes here
}
\lstdefinelanguage{json}{
    literate=
     *{0}{{{\color{numb}0}}}{1}
      {1}{{{\color{numb}1}}}{1}
      {2}{{{\color{numb}2}}}{1}
      {3}{{{\color{numb}3}}}{1}
      {4}{{{\color{numb}4}}}{1}
      {5}{{{\color{numb}5}}}{1}
      {6}{{{\color{numb}6}}}{1}
      {7}{{{\color{numb}7}}}{1}
      {8}{{{\color{numb}8}}}{1}
      {9}{{{\color{numb}9}}}{1}
      {:}{{{\color{punct}{:}}}}{1}
      {,}{{{\color{punct}{,}}}}{1}
      {\{}{{{\color{delim}{\{}}}}{1}
      {\}}{{{\color{delim}{\}}}}}{1}
      {[}{{{\color{delim}{[}}}}{1}
      {]}{{{\color{delim}{]}}}}{1},
}
\usepackage{tikz}
\usepackage[multiple]{footmisc}
\usepackage{tikzpeople}
\usetikzlibrary{positioning}
\usetikzlibrary{shadows}
\usetikzlibrary{shapes.geometric,shapes.misc,decorations.pathreplacing,calligraphy}
\tikzset{%
  squarednode/.style={rectangle, draw=CadetBlue!60, fill=CadetBlue!5, very thick, minimum size=5mm,align=center},
  %
  module/.style={rectangle, draw=CadetBlue!60, fill=CadetBlue!5, very thick, minimum size=5mm,align=center},% as application
  dataSpecification/.style={rectangle, draw=Fuchsia!60, fill=Fuchsia!5, very thick, minimum size=5mm,align=center},% our new concept
  schema/.style={rectangle, draw=MidnightBlue!60, fill=MidnightBlue!5, very thick, minimum size=5mm,align=center},% artifact, but is schema
  artefact/.style={rectangle, draw=Periwinkle!60, fill=Periwinkle!5, very thick, minimum size=5mm,align=center},% general artifact
  document/.style={rectangle, draw=Periwinkle!60, fill=Periwinkle!5, very thick, minimum size=5mm,align=center},% general artifact
  mapping/.style={rectangle, draw=Black!60, fill=Black!5, very thick, minimum size=5mm,align=center},
  seda/.style={rectangle, draw=Gray!60, fill=Gray!5, very thick, minimum size=5mm,align=center},
  % ---
  % CIM
  % ---
  ontology/.style={rectangle, draw=RedViolet!60, fill=RedViolet!5, very thick, minimum size=5mm,align=center},% ontology or CIM
  %
  ontologyClass/.style={shape=rectangle, draw=violet!60, fill=violet!5, very thick, minimum size=5mm,align=center},
  % ----------------------------------
  % PIM entities used only to show PIM
  % ----------------------------------
  pimClass/.style={rectangle, draw=violet!60, fill=violet!5, very thick, minimum size=5mm,align=center},
  pimAttribute/.style={rectangle, draw=teal!60, fill=teal!5, very thick, minimum size=5mm,align=center},
  pimAssociation/.style={rectangle, draw=purple!60, fill=purple!5, very thick, minimum size=5mm,align=center},
  pimAssociationend/.style={rectangle, draw=pink!60, fill=pink!5, very thick, minimum size=5mm,align=center},
  % -----------------------------
  % PSM entities to show only PSM
  % -----------------------------
  generalSchema/.style={rectangle, draw=blue!60, fill=blue!5, very thick, minimum size=5mm,align=center},% equivalent to PSM
  %
  psmClass/.style={rectangle, draw=Orchid!60, fill=Orchid!5, very thick,align=center},
  psmAttribute/.style={rectangle, draw=OliveGreen!60, fill=OliveGreen!5, very thick,align=center},
  psmOr/.style={diamond, draw=Thistle!60, fill=Thistle!5, very thick,align=center},
  psmOrGroup/.style={circle, draw=Thistle!60, fill=Thistle!5, very thick, minimum size=5mm,align=center},
  psmIncludes/.style={chamfered rectangle, draw=Magenta!60, fill=Magenta!5, very thick,align=center},
  %
  human/.style={,minimum size=.8cm},
  database/.style={
      cylinder,
      cylinder uses custom fill,
      cylinder body fill=yellow!50,
      cylinder end fill=yellow!50,
      shape border rotate=90,
      aspect=0.25,
      draw
   },
  %
  cascaded/.style = {%
    general shadow = {%
      shadow scale = 1,
      shadow xshift = 1ex,
      shadow yshift = -1ex,
      draw,
      fill = white},
    general shadow = {%
      shadow scale = 1,
      shadow xshift = .5ex,
      shadow yshift = -.5ex,
      draw,
      fill = white}}}
\usepackage{ amssymb }
\usepackage[inline]{enumitem}

\theoremstyle{definition}
\newtheorem{requirement}{Requirement}
\newcommand{\requirementautorefname}{Requirement}
\newtheorem{definition}{Definition}
\newtheorem*{notation}{Notation}
\usepackage{tabularx}
\usepackage{makecell}

\usepackage{caption}
\usepackage{subcaption}
\usepackage{xcolor}
\newcommand{\td}[1]{\bigskip\par\noindent{\color{purple}#1}\par\bigskip}

%\usepackage[textcolor=purple,color=purple,bordercolor=white,backgroundcolor=white,size=tiny]{todonotes}\marginpar{left}
%\reversemarginpar
%\geometry{marginparwidth=75pt}
\usepackage[super]{nth}

\usepackage{afterpage}
\usepackage{pdflscape}
\usepackage{dsfont}
\usepackage{xhfill}
\usepackage[skins]{tcolorbox}
\usepackage{varwidth}
\makeatletter
\newtcolorbox{mybox}[1][]{
  enhanced,
  colframe=black, colback=white,
  sharp corners,
  boxrule=0.6pt,
  detach title,
  coltitle=black,
  colbacktitle=white,
  fonttitle=\footnotesize,
  enlarge left by=-8mm,
  enlarge right by=-2mm,
  width=\linewidth+10mm,
  left=7mm,
  right=2mm,
  before upper=\setlength{\parindent}{17.62482pt}\everypar{{\setbox0\lastbox}\@minipagefalse\everypar{}},
%  overlay={
%    \node[rotate=90,
%          fill=tcbcolbacktitle,
%          font=\kvtcb@fonttitle,
%          minimum width=1cm]
%          at (frame.west)
%      {\begin{varwidth}{\tcbtextheight}%
%         \centering\tcbtitle\par
%       \end{varwidth}};
%  },
#1}
\makeatother

% \newenvironment{showcase}
% {\bigskip\begin{mybox}[title=Example]}
% {\end{mybox}\bigskip}

\newenvironment{showcase}
{\bigskip}
{\bigskip}


%%% Basic information on the thesis

% Thesis title in English (exactly as in the formal assignment)
\def\ThesisTitle{Model-driven approach for data schema definitions modeling}

% Author of the thesis
\def\ThesisAuthor{Bc. Štěpán Stenchlák}

% Year when the thesis is submitted
\def\YearSubmitted{2022}

% Name of the department or institute, where the work was officially assigned
% (according to the Organizational Structure of MFF UK in English,
% or a full name of a department outside MFF)
\def\Department{Department of Software Engineering}

% Is it a department (katedra), or an institute (ústav)?
\def\DeptType{Department}

% Thesis supervisor: name, surname and titles
\def\Supervisor{doc. Mgr. Martin Nečaský, Ph.D.}

% Supervisor's department (again according to Organizational structure of MFF)
\def\SupervisorsDepartment{Department of Software Engineering}

% Study programme and specialization
\def\StudyProgramme{Computer Science - Software and Data Engineering (N0613A140015)}
\def\StudyBranch{Computer Science - Software and Data Engineering}

% An optional dedication: you can thank whomever you wish (your supervisor,
% consultant, a person who lent the software, etc.)
\def\Dedication{%
This thesis was made possible thanks to numerous people who helped me or motivated me during the journey.

On the one side, I would like to thank my family for the financial support and for encouraging me to continue educating myself. Thanks to my girlfriend Kateřina for all the emotional support despite the long nights spent on this project.

I want to express my gratitude to my supervisor, doc. Mgr. Martin Nečaský, Ph.D., for guiding me through this and other projects during my study and helping me find the right branch of informatics I enjoy exploring. I also value the help from my consultants Mgr. Petr Škoda, Ph.D. and RNDr. Jakub Klímek, Ph.D.

Finally, I want to thank my friend Jáchym Bártík for the encouragement and the long-lasting friendly rivalry, which will continue in our Ph.D. study.
}

% Abstract (recommended length around 80-200 words; this is not a copy of your thesis assignment!)
\def\Abstract{%
This work analyzes, formalizes, and implements a framework for multi-level conceptual modeling of various serialization formats based on Model-Driven Architecture and previously developed tools XCase and eXolutio. It enables users to model their schema from a conceptual model in one general form from which multiple schema formats can be derived alongside documentation and transformation scripts. The thesis introduces base formalisms and findings and analyzes advanced requirements for the following work in this area, such as evolution and inheritance of schemas.

The primary use case of the tool is modeling formal open standards for publishing open data for the government and public institutions of the Czech Republic. Nevertheless, the intent is to make the tool for general schema modeling.
}

% 3 to 5 keywords (recommended), each enclosed in curly braces
\def\Keywords{%
{schema definition} {data modeling} {ontologies} {Model-Driven Architecture}
}

%% The hyperref package for clickable links in PDF and also for storing
%% metadata to PDF (including the table of contents).
%% Most settings are pre-set by the pdfx package.
\hypersetup{unicode}
\hypersetup{breaklinks=true}

% Definitions of macros (see description inside)
\include{macros}

% Title page and various mandatory informational pages
\begin{document}
\include{title}

%%% A page with automatically generated table of contents of the master thesis

\tableofcontents

%%% Each chapter is kept in a separate file
\include{chapters/introduction}
\include{chapters/previous-research}
\include{chapters/analysis}
\include{chapters/formal-background}
\include{chapters/implementation}
\include{chapters/related-work}
\include{chapters/evaluation}
\include{chapters/epilog}

%%% Bibliography
\include{bibliography}

%%% Figures used in the thesis (consider if this is needed)
%\listoffigures

%%% Tables used in the thesis (consider if this is needed)
%%% In mathematical theses, it could be better to move the list of tables to the beginning of the thesis.
%\listoftables

%%% Abbreviations used in the thesis, if any, including their explanation
%%% In mathematical theses, it could be better to move the list of abbreviations to the beginning of the thesis.
%\chapwithtoc{List of Abbreviations}

%%% Attachments to the master thesis, if any. Each attachment must be
%%% referred to at least once from the text of the thesis. Attachments
%%% are numbered.
%%%
%%% The printed version should preferably contain attachments, which can be
%%% read (additional tables and charts, supplementary text, examples of
%%% program output, etc.). The electronic version is more suited for attachments
%%% which will likely be used in an electronic form rather than read (program
%%% source code, data files, interactive charts, etc.). Electronic attachments
%%% should be uploaded to SIS and optionally also included in the thesis on a~CD/DVD.
%%% Allowed file formats are specified in provision of the rector no. 72/2017.
%\appendix

\chapter{Attachments}
\vfill
\begin{figure}[h!]
  \centering
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{img/or_inheritance_off.png}
    \caption{General schema with OR in the root of the schema and several includes.}
  \end{subfigure}
  \begin{subfigure}[b]{\textwidth}
    \includegraphics[width=\textwidth]{img/or_inheritance.png}
    \caption{Same general schema visualized as one base class with specializations.}
  \end{subfigure}
  \caption{Screenshots from the tool comparing a general schema of a Public place with two specializations according to \autoref{requirement:inheritance}. The variants show the plain view, consisting of OR and include, and a user-friendly view hiding those constructs. The example shows one of the FOSes that we are trying to model. For the purpose of this example, the schema was simplified, some classes were contracted, and labels were translated to English.}
  \label{fig:screenshot-comparison}
\end{figure}
\vfill

\begin{figure}
  \centering
  \includegraphics[width=\textwidth]{img/objekt_nebo_subjekt.png}
  \caption{A real-life example of a general schema of one of the RPP FOSes, that were described in \autoref{sec:register-of-rights-and-obligations}. You can see that the schema consists of only a few associations and attributes. There are two references to the other schema denoted by \textit{[refers to]} text.}
  \label{fig:screenshot}
\end{figure}
%
%\section{First Attachment}

\openright
\end{document}
